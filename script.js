// https://jsfiddle.net/y039Lwaf/9/

const canvas = document.querySelector("canvas");
const inputOffset = document.querySelector("#offset");
const ctx = canvas.getContext("2d");
let offset = 0;
let path = new Path2D(
  "m 675.38108,270 h -5.16215 L 581.60205,188.41842 529.1202,94.639387 511.05269,40.436829 586.7642,25.810742 733.02507,37.855755 776.90333,98.941177 699.4711,43.878261 l -6.02251,76.571869 16.34681,52.48184 24.95038,49.04041 -4.30179,-86.89616 -16.3468,-45.598982 -30.97289,-39.57647 9.46394,84.315092 39.57647,81.73401 -3.44143,54.05013 -93.77903,-9.31151 -35.12226,-90.33759 34.2619,-64.52686 83.45473,1.72072 102.38261,51.62148 -58.50435,53.3422 -106.6844,-59.36471 -54.91049,-83.454727 -64.67928,-13.765729 -55.92327,6.022506 -42.15755,24.090026 7.74322,79.152944 20.6486,59.3647 46.45933,11.18466 57.64399,6.02251 45.59898,-28.39182 1.72072,-117.008697 33.55396,-26.6711 46.45934,12.905371 -16.34681,92.058316 19.78824,117.00869 7.74322,-93.77903 20.6486,-116.148334 25.81074,-39.576471 73.13043,17.207161 -7.74322,60.225064 -50.76113,46.45934 -52.48184,56.78363 -43.87826,40.43683 -60.22506,49.04041 -23.22967,30.97289 -0.86036,31.83324 11.33708,24.09003 23.9376,12.90537 h 31.83325 l 48.18005,-30.97289 24.09003,-58.50435 18.92787,-42.15754 55.92328,-19.78824 7.74322,45.59898 -55.06292,51.62148 -61.08542,204.76522 8.60358,-67.96828 9.46394,-174.65269 10.3243,-86.03581 -29.25218,-57.64399 -49.90076,132.49514 43.87826,79.15295 86.89616,67.96828 25.81075,-7.74322 -33.55397,-89.47724 -29.25217,-31.83325 -50.76113,-10.32429 -33.55396,-6.02251 -20.6486,-4.30179 -7.74322,-49.04041 55.92327,-6.02251 45.59898,44.73862 35.27468,31.83325 h 47.31969 l 10.3243,-65.38721 -71.40972,-61.94578 -20.64859,-15.48645 -30.97289,-22.36931 -50.76113,-54.20255 -31.83325,-48.180056 v -4.30179 L 646.98926,0 h 13.76573 l 42.15754,27.531458 18.92788,68.828645 5.16215,96.360107 L 695.16931,70.549361 730.44399,189.27877 742.489,52.481842 739.04757,244.34169 773.46189,86.035806 l 36.9954,0.860358 -11.18465,96.360106 -49.90077,45.59897 H 709.7954 L 674.52072,214.22916 670.21893,157.44553 712.37647,101.52225 742.489,0 h -11.18465 l -38.71611,51.621484 -30.97289,74.851146 -17.20716,86.03581 12.04501,89.47724 18.92788,-51.62148 24.09002,-64.52686 24.95038,-83.45473 L 770.88082,0 h 25.81074 L 753.67366,143.6798 730.44399,192.72021 705.49361,270 h 24.95038 l 35.27468,-42.00511 19.78824,-57.64399 8.60358,-77.432229 24.95038,-3.441433 50.76112,11.184652 21.50896,26.6711 -4.30179,5.16215 -99.45529,19.25314 -33.90021,-8.06848 -41.29719,-14.62609 -5.16215,0.86036 12.04502,-56.783635 13.76573,-6.882864 33.55396,-22.36931 57.64399,7.743223 30.97289,21.508951 29.25217,8.603581 L 897.35346,67.968287 869.82199,24.950384 813.03837,18.927877 759.69617,0 707.21432,18.927877 658.17391,37.855755 639.24604,65.387213 579.88133,111.84655 559.23274,94.639387 536.00307,54.202558 l 23.22967,-18.927877 57.64399,-2.581075 64.52685,49.900768 43.87826,103.242966 42.15755,47.31969 18.92788,2.58108 31.83324,-39.57647 -6.0225,-91.19796 L 729.58363,37.855755 559.23274,0 l -23.22967,54.202558 6.88286,109.265472 5.75007,76.10681 13.17781,41.76224 46.45934,31.83325 48.18005,25.81075 60.22506,6.0225 67.10793,6.02251 33.55397,31.83325 -39.57648,20.64859 -63.66649,99.80154 0.86036,-107.54476 L 694.30895,228.85524 677.10179,81.734016 696.89003,22.36931 654.73248,0 l -71.40972,53.3422 5.16215,76.57187 -6.02251,82.59437 56.78364,51.62148 129.05371,-12.04501 30.11253,-19.78823 43.87826,-43.87826 L 844.01126,86.035806 835.40767,0 l -97.22046,18.067519 -36.13503,98.080821 -12.04502,67.10793 -7.74322,117.00869 61.08542,100.6619 -22.36931,83.45473 L 697.75038,560.0931 646.98926,319.19284 665.05678,159.16624 639.24604,51.621484 591.92634,41.297187 539.4445,0 621.17852,-47.319693 740.76829,-38.716113 823.36266,0"
);

let clippingRect = new Path2D();
clippingRect.rect(212 / 2, 74 / 2, 976 / 2, 586 / 2);

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.lineDashOffset = offset;
  ctx.setLineDash([10000, 800]); // 240+60 = 300

  ctx.strokeStyle = "black";
  ctx.stroke(path);

  ctx.save();

  ctx.clearRect(212 / 2, 74 / 2, 976 / 2, 586 / 2);
  ctx.strokeStyle = "white";
  ctx.clip(clippingRect);
  ctx.stroke(path);

  ctx.restore();
  offset += 2;
  window.requestAnimationFrame(draw);
}

draw();
